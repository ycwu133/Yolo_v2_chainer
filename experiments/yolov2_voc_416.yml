end_trigger: [80200, "iteration"] # 3200 / 16 = 200 * 150 = 30000
results: results
gpus: []
mode: Train
seed: 1

model:
  module: models.yolov2_base
  name: YOLOv2_base
  pretrained_model:
    path:
    download:
  architecture:
    n_classes: 20
    n_boxes: 5
    anchors: [1.3221, 1.73145, 3.19275, 4.00944, 5.05587, 8.09892,
              9.47112, 4.84053, 11.2364, 10.0071]
    widthes: [320, 352, 384, 416, 448, 480, 512, 544, 576, 608]
    heightes: [320, 352, 384, 416, 448, 480, 512, 544, 576, 608]
    object_scale: 5
    noobject_scale: 1
    class_scale: 1
    coord_scale: 1
    thresh :  .6
    height: 416
    width: 416

dataset:
  train:
    module: chainercv.datasets
    name: VOCBboxDataset
    args:
      data_dir: auto
      year: '2012'
      split: trainval
      use_difficult: False
      return_difficult: False

  train2:
    module: chainercv.datasets
    name: VOCBboxDataset
    args:
      data_dir: auto
      year: '2007'
      split: trainval
      use_difficult: False
      return_difficult: False

  valid:
    module: chainercv.datasets
    name: VOCBboxDataset
    args:
      data_dir: auto
      year: '2007'
      split: test
      use_difficult: True
      return_difficult: True

updater:
  name: StandardUpdater

iterator:
  name: SerialIterator #MultiprocessIterator
  train_batchsize: 4
  test_batchsize: 4
  # args:
  #  n_processes: 4
  #  n_prefetch: 1
  #  shared_mem: 60000000

optimizer:
  name: MomentumSGD
  args:
    lr: 0.001
    momentum: 0.9
  hook:
    WeightDecay: 0.0005

extension:
  #Evaluator:
  #  name: Evaluator
  #  trigger: [1, 'epoch']
  snapshot:
      trigger: [80200, "iteration"]
  snapshot_object:
      trigger: [10000, "iteration"]
  LogReport:
    trigger: [10, "iteration"]
  PrintReport:
    name:
      epoch
      iteration
      main/total_loss
      main/pixel_loss
      main/smooth_loss
      main/exp_loss
      lr
    trigger: [100, "iteration"]
  ProgressBar:
      update_interval: 10
  ExponentialShift:
    trigger: [1, 'iteration']
    attr: 'lr'
    rate: 0.1
    name: 'iteration'
    numbers: [40000, 60000]
  observe_lr:
    trigger: [10, "iteration"]
